<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
    .multiselect {
    width: 200px;
    }

    .selectBox {
    position: relative;
    }

    .selectBox select {
    width: 100%;
    font-weight: bold;
    }

    .overSelect {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    }

    #checkboxes {
    display: none;
    border: 1px #dadada solid;
    }

    #checkboxes label {
    display: block;
    }

    #checkboxes label:hover {
    background-color: #1e90ff;
    }
</style>
</head>
<body>
    <div class="container mt-2 ml-2" id="row">
        <input type="text" id="name">
        <button id="addrow" class="btn btn-primary btn-sm">Add</button>
    
    <div id="newRow"></div>

        
    <div class="multiselect mt-3">
        <div class="selectBox">
            <select>
                <option>Select an option</option>
            </select>
            <div class="overSelect"></div>
        </div>
        <div id="checkboxes">
            <label>
                <input type="checkbox" class="selectAll" />Select All</label>
            <label for="one">
                <input type="checkbox" class="selectOption" value="First"  onchange="toggleFillColor(this)" /> First checkbox</label>
            <label for="two">
                <input type="checkbox" class="selectOption" value="Second" onchange="toggleFillColor(this)"/> Second checkbox</label>
            <label for="three">
                <input type="checkbox" class="selectOption" value="Third" onchange="toggleFillColor(this)" /> Third checkbox</label>
        </div>
    </div>
    
</div>

<script>
    // Add & Remove input
    $(document).ready(function() {  
        $('#addrow').click(function (){
            newrowAdd = '<div class="mt-2 ml-2"><input type="text" id="name">'+' <button id="deleteRow" class="btn btn-danger btn-sm">remove</button></div>';
            $('#newRow').append(newrowAdd);
        });
        
        $('body').on('click','#deleteRow',function(){
            $(this).parent('div').remove();
        });

    });

    // Checkbox in select-Option
    $('.multiselect').click(function (){
        $('#checkboxes').show();
    });

    $('.selectAll').change(function(){
        $('.selectOption').prop("checked", $(this).prop("checked"));

    });

    $('.selectOption').change(function(){
        if($(this).prop('checked') == false){
            $('.selectAll').prop('checked', false) ;
        }
        if($('.selectOption:checked').length == $('.selectOption').length){
            $('.selectAll').prop('checked', true) ;
        }
    });

    

    function toggleFillColor(obj) {
		$("#custom-select-option-box").show();
		if ($(obj).prop('checked') == true) {
			$(obj).parent().css("background", '#c6e7ed');
		} else {
			$(obj).parent().css("background", '#FFF');
		}
    }

    </script>
</body>
</html>